{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Temilola/Documents/contact-us-form-application/contact-us-form-application/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Temilola/Documents/contact-us-form-application/contact-us-form-application/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/Temilola/Documents/contact-us-form-application/contact-us-form-application/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Temilola/Documents/contact-us-form-application/contact-us-form-application/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Temilola/Documents/contact-us-form-application/contact-us-form-application/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";import\"../styles/Form.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var INITIAL_STATE={name:\"\",email:\"\",subject:\"\",comment:\"\"};export default function Form(){var _errorFields$name,_errorFields$email,_errorFields$comment;var _useState=useState(INITIAL_STATE),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),successful=_useState4[0],setSuccessful=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),Error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),Loading=_useState8[0],setLoading=_useState8[1];var VALIDATION={name:[{isValid:function isValid(value){return!!value;},message:\"Required *\"}],email:[{isValid:function isValid(value){return!!value;},message:\"Required *\"},{isValid:function isValid(value){return /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value);},message:\"Invalid email \"}],comment:[{isValid:function isValid(value){return!!value;},message:\"Required *\"}]};var getErrorFields=function getErrorFields(form){return Object.keys(form).reduce(function(acc,key){if(!VALIDATION[key])return acc;var errorsPerField=VALIDATION[key].map(function(validation){return{isValid:validation.isValid(form[key]),message:validation.message};}).filter(function(errorPerField){return!errorPerField.isValid;});return _objectSpread(_objectSpread({},acc),{},_defineProperty({},key,errorsPerField));},{});};var handleChange=function handleChange(event){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},event.target.id,event.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var hasErrors,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();hasErrors=Object.values(errorFields).flat().length>0;if(!hasErrors){_context.next=4;break;}return _context.abrupt(\"return\");case 4:_context.prev=4;setTimeout(setLoading(!Loading),2000);_context.next=8;return axios.post(\"https://my-json-server.typicode.com/tundeojediran/contacts-api-server/inquiries\",form);case 8:response=_context.sent;console.log(response.data);setSuccessful(JSON.stringify(response.data,null,2));_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](4);console.error(_context.t0);setError(_context.t0);case 17:_context.prev=17;setLoading(Loading);return _context.finish(17);case 20:setForm(INITIAL_STATE);case 21:case\"end\":return _context.stop();}},_callee,null,[[4,13,17,20]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var errorFields=getErrorFields(form);return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Contact us\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[successful&&/*#__PURE__*/_jsx(\"p\",{className:\"submission\",children:\"Your Inquiry was submitted successfully\"}),Error&&/*#__PURE__*/_jsx(\"p\",{className:\"submission\",children:\"Your Inquiry submission was not successful\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",value:form.name,onChange:handleChange}),(_errorFields$name=errorFields.name)!==null&&_errorFields$name!==void 0&&_errorFields$name.length?/*#__PURE__*/_jsx(\"span\",{children:errorFields.name[0].message}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"email\",type:\"text\",value:form.email,onChange:handleChange}),(_errorFields$email=errorFields.email)!==null&&_errorFields$email!==void 0&&_errorFields$email.length?/*#__PURE__*/_jsx(\"span\",{children:errorFields.email[0].message}):null]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"subject\",children:\"Subject\"}),/*#__PURE__*/_jsx(\"input\",{id:\"subject\",type:\"text\",value:form.subject,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"comment\",children:\"Message\"}),/*#__PURE__*/_jsx(\"textarea\",{id:\"comment\",rows:\"8\",value:form.comment,onChange:handleChange}),(_errorFields$comment=errorFields.comment)!==null&&_errorFields$comment!==void 0&&_errorFields$comment.length?/*#__PURE__*/_jsx(\"span\",{children:errorFields.comment[0].message}):null]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:Loading?\"Submitting...\":\"Submit\"})]})]});}","map":{"version":3,"names":["useState","axios","jsx","_jsx","jsxs","_jsxs","INITIAL_STATE","name","email","subject","comment","Form","_errorFields$name","_errorFields$email","_errorFields$comment","_useState","_useState2","_slicedToArray","form","setForm","_useState3","_useState4","successful","setSuccessful","_useState5","_useState6","Error","setError","_useState7","_useState8","Loading","setLoading","VALIDATION","isValid","value","message","test","getErrorFields","Object","keys","reduce","acc","key","errorsPerField","map","validation","filter","errorPerField","_objectSpread","_defineProperty","handleChange","event","target","id","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","hasErrors","response","wrap","_callee$","_context","prev","next","preventDefault","values","errorFields","flat","length","abrupt","setTimeout","post","sent","console","log","data","JSON","stringify","t0","error","finish","stop","_x","apply","arguments","children","onSubmit","className","htmlFor","type","onChange","rows"],"sources":["C:/Users/Temilola/Documents/contact-us-form-application/contact-us-form-application/src/components/Form.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../styles/Form.css\";\r\n\r\nconst INITIAL_STATE = {\r\n  name: \"\",\r\n  email: \"\",\r\n  subject: \"\",\r\n  comment: \"\",\r\n};\r\n\r\nexport default function Form() {\r\n  const [form, setForm] = useState(INITIAL_STATE);\r\n  const [successful, setSuccessful] = useState(false);\r\n  const [Error, setError] = useState(false);\r\n  const [Loading, setLoading] = useState(false);\r\n\r\n  const VALIDATION = {\r\n    name: [\r\n      {\r\n        isValid: (value) => !!value,\r\n        message: \"Required *\",\r\n      },\r\n    ],\r\n    email: [\r\n      {\r\n        isValid: (value) => !!value,\r\n        message: \"Required *\",\r\n      },\r\n      {\r\n        isValid: (value) =>\r\n          /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(value),\r\n        message: \"Invalid email \",\r\n      },\r\n    ],\r\n    comment: [\r\n      {\r\n        isValid: (value) => !!value,\r\n        message: \"Required *\",\r\n      },\r\n    ],\r\n  };\r\n\r\n  const getErrorFields = (form) =>\r\n    Object.keys(form).reduce((acc, key) => {\r\n      if (!VALIDATION[key]) return acc;\r\n      const errorsPerField = VALIDATION[key]\r\n        .map((validation) => ({\r\n          isValid: validation.isValid(form[key]),\r\n          message: validation.message,\r\n        }))\r\n        .filter((errorPerField) => !errorPerField.isValid);\r\n      return { ...acc, [key]: errorsPerField };\r\n    }, {});\r\n\r\n  const handleChange = (event) => {\r\n    setForm({\r\n      ...form,\r\n      [event.target.id]: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    const hasErrors = Object.values(errorFields).flat().length > 0;\r\n    if (hasErrors) return;\r\n\r\n    try {\r\n      setTimeout(setLoading(!Loading), 2000);\r\n      const response = await axios.post(\r\n        \"https://my-json-server.typicode.com/tundeojediran/contacts-api-server/inquiries\",\r\n        form\r\n      );\r\n      console.log(response.data);\r\n      setSuccessful(JSON.stringify(response.data, null, 2));\r\n    } catch (error) {\r\n      console.error(error);\r\n      setError(error);\r\n    } finally {\r\n      setLoading(Loading);\r\n    }\r\n    setForm(INITIAL_STATE);\r\n  };\r\n\r\n  const errorFields = getErrorFields(form);\r\n\r\n  return (\r\n    <main>\r\n      <h1>Contact us</h1>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        {successful && (\r\n          <p className=\"submission\">Your Inquiry was submitted successfully</p>\r\n        )}\r\n        {Error && (\r\n          <p className=\"submission\">\r\n            Your Inquiry submission was not successful\r\n          </p>\r\n        )}\r\n        <div className=\"input\">\r\n          <label htmlFor=\"name\">Full Name</label>\r\n          <input\r\n            id=\"name\"\r\n            type=\"text\"\r\n            value={form.name}\r\n            onChange={handleChange}\r\n          />\r\n          {errorFields.name?.length ? (\r\n            <span>{errorFields.name[0].message}</span>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"input\">\r\n          <label htmlFor=\"email\">Email</label>\r\n          <input\r\n            id=\"email\"\r\n            type=\"text\"\r\n            value={form.email}\r\n            onChange={handleChange}\r\n          />\r\n          {errorFields.email?.length ? (\r\n            <span>{errorFields.email[0].message}</span>\r\n          ) : null}\r\n        </div>\r\n        <div className=\"input\">\r\n          <label htmlFor=\"subject\">Subject</label>\r\n          <input\r\n            id=\"subject\"\r\n            type=\"text\"\r\n            value={form.subject}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className=\"input\">\r\n          <label htmlFor=\"comment\">Message</label>\r\n          <textarea\r\n            id=\"comment\"\r\n            rows=\"8\"\r\n            value={form.comment}\r\n            onChange={handleChange}\r\n          ></textarea>\r\n          {errorFields.comment?.length ? (\r\n            <span>{errorFields.comment[0].message}</span>\r\n          ) : null}\r\n        </div>\r\n        <button type=\"submit\">{Loading ? \"Submitting...\" : \"Submit\"}</button>\r\n      </form>\r\n    </main>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}